//>>built
define("epi/shell/command/builder/OptionsBuilderMixin",["epi","dojo/_base/declare","dojo/_base/lang","dojo/on","dijit/CheckedMenuItem","../OptionGroup","epi/shell/widget/MenuHeaderSeparator","epi/shell/DestroyableByKey"],function(_1,_2,_3,on,_4,_5,_6,_7){return _2([_7],{optionItemClass:"",constructor:function(_8){_2.safeMixin(this,_8);},startup:function(){this.inherited(arguments);this._addOptionMenuItems();},_addOptionMenuItems:function(){if(!this._started){return;}this.getChildren().forEach(function(_9){this.removeChild(_9);if(typeof _9.destroy==="function"){_9.destroy();}},this);this._createOptionMenuItems(this.model).forEach(this.addChild.bind(this));},_createOptionMenuItems:function(_a){var _b=[];var _c=_a.get("options");if(!_3.isArray(_c)){return _b;}if(_a.optionsLabel){_b.push(new _6({label:_a.optionsLabel}));}_c.forEach(function(_d){if(_d instanceof _5){_b.push(new _6({label:_d.label}));_b=_b.concat(this._createOptionMenuItems(_d));}else{_b.push(this._createMenuItem(_d,_a));}},this);return _b;},_setModelAttr:function(_e){this._set("model",_e);this.destroyByKey("optionsWatch");this.ownByKey("optionsWatch",_e.watch("options",this._addOptionMenuItems.bind(this)));},_createMenuItem:function(_f,_10){var _11=new _4({label:_f.label,checked:_1.areEqual(_10.get("selected"),_f.value),"class":this.optionItemClass});_11.own(on(_11,"click",function(){_10.set("selected",_f.value);}));_11.own(_10.watch("selected",function(_12,_13,_14){_11.set("checked",_1.areEqual(_14,_f.value));}));return _11;}});});